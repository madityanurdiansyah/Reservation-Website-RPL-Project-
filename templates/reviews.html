{% extends "base.html" %}

{% block title %}Reviews{% endblock %}

{% block content %}
    <h2>Customer Reviews</h2>
    
    {% if 'user_id' in session %}
        <section class="add-review">
            <h3>Add Your Review</h3>
            <form method="POST">
                <div class="form-group">
                    <label for="rating">Rating</label>
                    <select id="rating" name="rating" required>
                        <option value="5">★★★★★</option>
                        <option value="4">★★★★☆</option>
                        <option value="3">★★★☆☆</option>
                        <option value="2">★★☆☆☆</option>
                        <option value="1">★☆☆☆☆</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="comment">Your Review</label>
                    <textarea id="comment" name="comment" required></textarea>
                </div>
                <button type="submit" class="btn">Submit Review</button>
            </form>
        </section>
    {% endif %}

    <section class="reviews-list">
        <h3>What Our Customers Say</h3>
        {% for review in reviews %}
            <div class="review-card">
                <div class="review-header">
                    <span class="rating">{% for _ in range(review.rating|int) %}★{% endfor %}</span>
                    <span class="date">{{ review.date }}</span>
                </div>
                <p class="comment">{{ review.comment }}</p>
                <p class="author">- {{ review.username }}</p>
            </div>
        {% endfor %}
    </section>
{% endblock %}